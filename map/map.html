<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
<title>title</title>
<style>
    /*별점*/
    .star1 {
        position: relative;
        font-size: 2rem;
        color: #ddd;
    }
    
    .star1 input {
        width: 100%;
        height: 100%;
        position: absolute;
        left: 0;
        opacity: 0;
        cursor: pointer;
    }
    
    .star1 span {
        width: 0;
        position: absolute; 
        left: 0;
        color: red;
        overflow: hidden;
        pointer-events: none;
    }

/*가격범위*/
.middle {
  position: relative;
  width: 50%;
  max-width: 500px;
}

.slider {
  position: relative;
  z-index: 1;
  height: 10px;
  margin: 0 15px;
}

.slider > .track {
  position: absolute;
  z-index: 1;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  border-radius: 5px;
  background-color: #c6aee7;
}

.slider > .range {
  position: absolute;
  z-index: 2;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  border-radius: 5px;
  background-color: #6200ee;
}

.slider > .thumb {
  position: absolute;
  z-index: 3;
  width: 30px;
  height: 30px;
  background-color: #6200ee;
  border-radius: 50%;
}

.slider > .thumb.left {
  left: 0;
  transform: translate(-15px, -10px);
}
.slider > .thumb.right {
  right: 0;
  transform: translate(15px, -10px);
}

input[type="range"] {
  position: absolute;
  /* opacity로 가린 것을 이벤트도 비활성화하기 위해 */
  pointer-events: none;
  -webkit-appearance: none;
  z-index: 2;
  height: 10px;
  width: 100%;
  opacity: 0;
}

input[type="range"]::-webkit-slider-thumb {
  /* 겹쳐진 두 thumb를 모두 활성화 */
  pointer-events: all;
  width: 30px;
  height: 30px;
  border-radius: 0;
  border: 0 none;
  background-color: red;
  cursor: pointer;
  /* appearance를 해야 위의 스타일들을 볼 수 있음 */
  -webkit-appearance: none;
}


</style>
</head>
<body>
<div class="hide_ie8_under">
    <div id="area_select_filter" style="width:315px; height:223px; background:url(bg_map_jeju.png) no-repeat;">
        <svg version="1.1" width="315" height="223">
            <!--제주시-->
            <polygon
                points="93,45,69,29,122,23,145,38,136,21,168,18,172,33,176,27,183,37,188,40,187,48,189,56,192,65,193,75,183,83,179,89,168,93,161,96,153,99,149,102,138,92,134,91,129,93,125,89,124,85,120,79,121,74,120,67,119,62,118,57,115,52,109,54,104,53,105,49,107,48"
                fill="url(#filter_area_off)" data-value="1" ss-data-value="SSA1" style="cursor: pointer;"></polygon>

            <!--제주시동부-->
            <polygon
                points="179,29,186,34,190,39,190,47,192,55,194,62,197,70,196,76,191,81,185,86,181,91,173,94,166,97,177,95,186,91,192,90,201,84,208,84,212,77,217,76,222,72,226,71,232,74,238,72,243,68,249,67,254,64,260,64,266,59,274,58,280,50,308,48,315,33,310,22,290,27,282,34,278,30,266,31,260,26,255,2,250,1,235,2,236,9,237,18,224,20,218,15,219,7,210,4,212,6,205,5,200,5"
                fill="url(#filter_area_off)" data-value="2" ss-data-value="SSA3" style="cursor: pointer;"></polygon>

            <!--제주시서부-->
            <polygon
                points="99,51,102,50,103,54,107,56,113,55,115,61,117,72,118,81,121,86,121,90,125,92,127,95,134,93,137,95,143,100,139,101,135,99,131,102,127,101,123,104,118,102,113,103,109,108,106,113,101,114,96,114,92,113,84,113,81,115,76,115,72,116,69,120,65,120,58,126,56,129,52,132,46,135,42,136,43,141,37,139,28,136,23,137,19,137,16,140,13,142,3,134,10,131,-1,123,2,116,19,114,20,109,26,106,30,104,31,100,35,96,22,86,25,75,44,78,47,81,48,78,50,74,57,71,62,70,65,67,65,61,70,62,62,49,65,42,84,46,93,52,95,53,98,49"
                fill="url(#filter_area_off)" data-value="3" ss-data-value="SSA6" style="cursor: pointer;"></polygon>

            <!--서귀포시-->
            <polygon
                points="88,166,90,154,92,149,91,139,92,134,98,140,102,141,99,135,101,131,105,128,107,124,109,120,110,117,111,111,113,108,117,105,122,106,127,105,130,105,136,104,138,103,141,105,144,102,148,104,154,102,156,103,164,111,172,121,175,128,177,137,183,145,185,153,186,157,183,163,177,163,174,163,178,175,172,176,168,180,160,178,157,180,148,177,145,176,141,166,138,167,136,165,132,167,129,168,128,170,126,168,124,166,122,163,120,162,119,175,117,181,110,182,96,180,96,167,90,167"
                fill="url(#filter_area_off)" data-value="4" ss-data-value="SSA2" style="cursor: pointer;"></polygon>

            <!--서귀포시동부-->
            <polygon
                points="1158,99,162,99,167,101,172,99,177,97,183,95,192,94,200,88,209,88,212,82,217,79,224,74,231,76,239,76,244,70,251,70,256,67,262,67,265,63,270,62,278,60,283,53,290,57,299,60,303,67,314,75,313,87,301,85,288,86,288,92,289,97,281,99,275,106,274,111,274,119,266,122,264,125,267,131,265,143,257,151,249,150,242,152,233,142,229,143,233,162,227,164,222,166,207,162,204,151,198,157,197,153,193,152,191,155,189,158,187,150,184,143,180,136,178,131,176,123,174,119,166,108,157,99"
                fill="url(#filter_area_off)" data-value="5" ss-data-value="SSA4" style="cursor: pointer;"></polygon>

            <!--서귀포시 서부-->
            <polygon
                points="20,145,18,141,22,139,26,139,35,141,44,145,46,138,48,137,53,135,61,127,67,124,70,123,74,118,82,119,85,116,87,116,95,117,99,116,104,118,106,119,104,126,97,132,96,134,94,131,91,133,89,137,88,141,90,149,85,167,75,164,73,164,68,166,63,173,63,184,71,221,39,221,24,193,30,182,47,180,47,176,42,173,39,167,31,165,27,161,25,157,18,153,17,149,13,144"
                fill="url(#filter_area_off)" data-value="6" ss-data-value="SSA5" style="cursor: pointer;"></polygon>

            <defs>
                <pattern id="filter_area_off" patternUnits="userSpaceOnUse" x="0" y="0" width="315" height="223">
                    <image xlink:href="bg_map_jeju.png" width="315" height="223"></image>
                </pattern>
                <pattern id="filter_area_on" patternUnits="userSpaceOnUse" x="0" y="0" width="315" height="223">
                    <image xlink:href="img_map_jeju_07.png" width="315" height="223"></image>
                </pattern>
            </defs>
        </svg>
    </div>
    <div>
        <label for="allCheck">전체선택</label>
        <input type="checkbox" name="" id="allCheck">
    </div>
    <div class="middle" style="margin-top: 50px;">
        <div class="multi-range-slider">
            <!-- 진짜 슬라이더 -->
            <input type="range" id="input-left" min="0" max="100" value="0"/>
            <input type="range" id="input-right" min="0" max="100" value="100" />

            <!-- 커스텀 슬라이더 -->
            <div class="slider">
                <div class="track"></div>
                <div class="range"></div>
                <div class="thumb left"></div>
                <div class="thumb right"></div>
            </div>
        </div>
    </div>
    <div style="margin-top: 50px;">
        <span>최소값:<label id="priceMin">0</label></span>
        <span style="margin-left:300px;">최대값:<label id="priceMax">100</label></span>
    </div>

    <label for="from">체크인</label>
    <input type="text" id="from" name="from">
    <label for="to">체크아웃</label>
    <input type="text" id="to" name="to">
    
    <div>
    <span class="star1">
        ★★★★★
        <span>★★★★★</span>
        <input type="range" oninput="drawStar(this);" value="1" step="2" min="0" max="10">
    </span>
    </div>
</div>
<script>
    const drawStar = (target) => {
            document.querySelector(`.star1 span`).style.width = `${target.value * 10}%`;
        }

    //체크인 체크아웃
    $(function () {
            var dateFormat = "yy년 mm월 dd일",
                from = $("#from")
                    .datepicker({
                        defaultDate: "+1w",
                        changeMonth: true,
                        numberOfMonths: 1,
                        dateFormat:'yy년 mm월 dd일'
                    })
                    .on("change", function () {
                        to.datepicker("option", "minDate", getDate(this));
                    }),
                to = $("#to").datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    numberOfMonths: 1,
                    dateFormat: 'yy년 mm월 dd일'
                })
                    .on("change", function () {
                        from.datepicker("option", "maxDate", getDate(this));
                    });

            function getDate(element) {
                var date;
                try {
                    date = $.datepicker.parseDate(dateFormat, element.value);
                } catch (error) {
                    date = null;
                }
                return date;
            }
    });


    $(function () {
        $("#area_select_filter>svg").children().css('cursor', 'pointer').click(function(){
            if($(this).attr('fill')=='url(#filter_area_off)'){
                $(this).attr('fill', 'url(#filter_area_on)');
                console.log($(this).data("value"));
            }else{
                $(this).attr('fill', 'url(#filter_area_off)');
            }
        })
        $("#allCheck").on('click',function(){
            if($(this).is(":checked")){
                console.log("체크");
                $("#area_select_filter>svg").children().attr('fill', 'url(#filter_area_on)');
            }else{
                console.log("노체크");
                $("#area_select_filter>svg").children().attr('fill', 'url(#filter_area_off)');
            }
        })
    })
    const inputLeft = document.getElementById("input-left");
        const inputRight = document.getElementById("input-right");

        const thumbLeft = document.querySelector(".slider > .thumb.left");
        const thumbRight = document.querySelector(".slider > .thumb.right");
        const range = document.querySelector(".slider > .range");

        const setLeftValue = () => {
            const _this = inputLeft;
            const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

            // 교차되지 않게, 1을 빼준 건 완전히 겹치기보다는 어느 정도 간격을 남겨두기 위해.
            _this.value = Math.min(parseInt(_this.value), parseInt(inputRight.value) - 1);

            // input, thumb 같이 움직이도록
            const percent = ((_this.value - min) / (max - min)) * 100;
            thumbLeft.style.left = percent + "%";
            range.style.left = percent + "%";
            $("#priceMin").text($("#input-left").val());
        };

        const setRightValue = () => {
            const _this = inputRight;
            const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

            // 교차되지 않게, 1을 더해준 건 완전히 겹치기보다는 어느 정도 간격을 남겨두기 위해.
            _this.value = Math.max(parseInt(_this.value), parseInt(inputLeft.value) + 1);

            // input, thumb 같이 움직이도록
            const percent = ((_this.value - min) / (max - min)) * 100;
            thumbRight.style.right = 100 - percent + "%";
            range.style.right = 100 - percent + "%";
            $("#priceMax").text($("#input-right").val());
        };

        inputLeft.addEventListener("input", setLeftValue);
        inputRight.addEventListener("input", setRightValue);

    
</script>
</body>
</html>